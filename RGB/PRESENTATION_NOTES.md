# 🎯 RPG 設計模式應用 - 口頭報告重點

## 📝 Force → Problem → Solution 結構化回答

### 1️⃣ 目標選擇的變動性問題

**Force (白話文)：**

> 不同技能有不同的目標選擇方式 - 火球攻擊所有敵人、水球攻擊單一敵人、自我治療只能選自己、鼓舞要選擇友軍。每次新增技能可能需要新的目標選擇邏輯，但我們不希望為此修改現有技能的代碼。

**Problem：**

> 如何讓目標選擇行為可以獨立變化和擴充？

**Solution：**

> 所以我套用了 **Strategy Pattern**，設計了 `TargetingPolicy` 策略接口，包含 `OneEnemyPolicy`, `AllEnemiesPolicy`, `SelfPolicy` 等具體策略。每個技能只需要組合適當的策略即可。

---

### 2️⃣ 角色狀態的行為變動性問題

**Force (白話文)：**

> 角色在不同狀態下行為完全不同 - 正常狀態可以行動、石化狀態無法行動、中毒狀態每回合掉血、鼓舞狀態增加傷害。狀態會動態改變，我們希望角色行為也能跟著自動改變。

**Problem：**

> 如何讓角色行為隨著狀態動態改變，並且支援新狀態的擴充？

**Solution：**

> 所以我套用了 **State Pattern**，設計了 `State` 接口，包含 `NormalState`, `PetrochemicalState`, `PoisonedState` 等。角色將行為委派給當前狀態物件。

---

### 3️⃣ 技能執行的變動性問題

**Force (白話文)：**

> 每個技能都有完全不同的執行效果 - 有些造成傷害、有些治療、有些改變狀態、有些召喚生物。我們希望戰鬥系統不需要知道每個技能的具體邏輯，就能統一執行所有技能。

**Problem：**

> 如何封裝技能執行行為，讓戰鬥系統能統一處理所有技能？

**Solution：**

> 所以我套用了 **Command Pattern**，設計了 `Action` 接口封裝執行命令。戰鬥系統只需調用 `execute()` 方法，不需關心具體實作。

---

### 4️⃣ 決策行為的變動性問題

**Force (白話文)：**

> 不同角色有完全不同的決策方式 - 英雄由玩家輸入控制、AI 角色按算法自動決策。我們希望能輕鬆替換決策邏輯，甚至在運行時動態更換。

**Problem：**

> 如何讓決策行為可以插拔式替換和擴充？

**Solution：**

> 所以我套用了 **Strategy Pattern**，設計了 `DecisionProvider` 策略接口，包含 `HeroDecisionProvider` 和 `AiDecisionProvider`。角色可以動態設置決策提供者。

---

### 5️⃣ 死亡事件的響應變動性問題

**Force (白話文)：**

> 當角色死亡時，需要觸發多種不同的響應 - 詛咒者要獲得死者的 MP、召喚者要獲得 HP、可能還要記錄統計數據等。這些響應邏輯彼此獨立，我們希望能動態增減響應者。

**Problem：**

> 如何實現一對多的事件通知，讓響應行為可以動態組合？

**Solution：**

> 所以我套用了 **Observer Pattern**，設計了 `DeathBus` 事件總線和 `DeathListener` 觀察者接口。`CurseTracker`, `SummonHealRule` 等各自實現自己的響應邏輯。

---

### 6️⃣ 條件處理的變動性問題

**Force (白話文)：**

> 一拳攻擊根據目標條件有不同效果 - 高血量時造成 300 傷害、壞狀態時三次 80 傷害、鼓舞狀態時 100 傷害並移除狀態等。我們希望能調整條件優先序，或新增處理條件。

**Problem：**

> 如何讓條件處理邏輯可以靈活組合和擴充？

**Solution：**

> 所以我套用了 **Chain of Responsibility**，設計了 `OnePunchRule` 責任鏈接口。按優先序排列 `HighHpRule`, `BadStateRule`, `CheerupRule`, `NormalRule`，找到第一個適用的就執行。

---

## 🏆 總結亮點

✅ **6 個設計模式**：Strategy(2 次)、State、Command、Observer、Chain of Responsibility

✅ **完全符合 OCP**：新增技能、狀態、AI、響應邏輯都無需修改現有代碼

✅ **Force 分析精準**：每個模式都解決了明確的行為變動性問題

✅ **架構高擴展性**：為未來需求變更奠定堅實基礎

---

## 💭 口頭報告技巧

1. **先說 Force**：用生活化語言描述遇到的變動性問題
2. **再說 Problem**：總結成一句精準的設計問題
3. **最後說 Solution**：明確指出套用的設計模式和核心設計
4. **強調效果**：說明解決後帶來的擴展性和維護性提升
